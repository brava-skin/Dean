# Smart Slack Notification Configuration
# Reduces spam while maintaining rich content

# Notification Frequency Control
notifications:
  # Main summary reports (reduced frequency)
  daily_summary:
    enabled: true
    frequency: "once_per_day"  # Only once per day
    time: "09:00"  # 9 AM Amsterdam time
    content: "full_summary"  # Rich content with all metrics
  
  # ML learning updates (reduced frequency)
  ml_learning:
    enabled: true
    frequency: "every_6_hours"  # Every 6 hours instead of every run
    content: "learning_progress"  # Focus on learning progress
  
  # Performance alerts (keep important ones)
  performance_alerts:
    enabled: true
    frequency: "immediate"  # Keep important alerts
    content: "critical_only"  # Only critical issues
  
  # Data collection (reduced frequency)
  data_collection:
    enabled: true
    frequency: "every_2_hours"  # Every 2 hours instead of every run
    content: "summary_only"  # Just summary, not detailed logs

# Content Filtering
content_filters:
  # Skip these types of messages
  skip_messages:
    - "data_stored"  # Skip "Data stored in Supabase" messages
    - "ml_analysis_completed"  # Skip "ML analysis completed" messages
    - "performance_data_inserted"  # Skip detailed insertion logs
    - "lifecycle_data_inserted"  # Skip lifecycle insertion logs
  
  # Keep these important messages
  keep_messages:
    - "ml_health_report"  # Keep ML health reports
    - "performance_summary"  # Keep performance summaries
    - "critical_alerts"  # Keep critical alerts
    - "learning_events"  # Keep learning events

# Smart Aggregation
aggregation:
  # Group similar messages
  group_similar: true
  max_messages_per_hour: 3  # Max 3 messages per hour
  batch_window: "5_minutes"  # Batch messages within 5 minutes
  
  # Priority levels
  priorities:
    critical: 1  # Always send
    important: 2  # Send if not too frequent
    info: 3  # Send only if aggregated
    debug: 4  # Skip most debug messages

# Time-based Controls
time_controls:
  # Quiet hours (reduce notifications)
  quiet_hours:
    enabled: true
    start: "22:00"  # 10 PM
    end: "08:00"    # 8 AM
    timezone: "Europe/Amsterdam"
    reduce_by: 0.8  # 80% reduction during quiet hours
  
  # Peak hours (normal notifications)
  peak_hours:
    start: "09:00"  # 9 AM
    end: "18:00"    # 6 PM
    timezone: "Europe/Amsterdam"
    frequency: "normal"

# Message Templates
templates:
  # Daily summary template
  daily_summary: |
    ðŸ¤– **Dean Daily Report** - {date}
    
    ðŸ“Š **Performance Summary:**
    â€¢ Total Ads: {total_ads}
    â€¢ Total Spend: â‚¬{total_spend}
    â€¢ Total Purchases: {total_purchases}
    â€¢ Avg CPA: â‚¬{avg_cpa}
    â€¢ Avg ROAS: {avg_roas}
    
    ðŸ§  **ML Intelligence:**
    â€¢ Status: {ml_status}
    â€¢ Models Active: {active_models}
    â€¢ Predictions Made: {predictions_24h}
    â€¢ Learning Events: {learning_events_24h}
    
    ðŸŽ¯ **Key Insights:**
    {key_insights}
    
    âš¡ **System Health:**
    â€¢ Uptime: {uptime}
    â€¢ Error Rate: {error_rate}%
    â€¢ Data Points: {data_points_24h}
  
  # ML learning template
  ml_learning: |
    ðŸ§  **ML Learning Update** - {time}
    
    ðŸ“ˆ **Learning Progress:**
    â€¢ Status: {ml_status}
    â€¢ Models Trained: {models_trained}
    â€¢ Recent Training: {recent_training}
    â€¢ Data Points: {data_points_24h}
    
    ðŸŽ¯ **Performance:**
    â€¢ Predictions: {predictions_24h}
    â€¢ Accuracy: {avg_accuracy}%
    â€¢ Confidence: {avg_confidence}%
  
  # Critical alert template
  critical_alert: |
    ðŸš¨ **Critical Alert** - {time}
    
    {alert_message}
    
    ðŸ”§ **Action Required:**
    {action_required}
